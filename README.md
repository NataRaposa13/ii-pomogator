# ii-pomogator
# Тестовое задание: «ИИ-помогатор» для баз знаний

  успешно создан базовый прототип автоматизированной системы для построения базы знаний из документов, где пользователь отправляет файлы в Telegram-бота, система извлекает текст, создает интеллектуальную суммаризацию, выделяет ключевые слова и сохраняет структурированные данные в Google Sheets.
  
## Основная информация:
- **Имя бота:** ИИ-помогатор (в Telegram @moi_ii_pomogator_bot)  
- **HTTP API:** 8529205175:AAErpbMTxKQB66yS1z4Ooe5mGCudfh3tM9k  
- **Ссылка для тестирования:** https://t.me/moi_ii_pomogator_bot (от BotFather)
- Пример работы на тестируемых данных: сохраненные результаты для трех документах находятся в гугл-таблице “ИИ-помогатор”
- Скриншоты примеров работы в телеграм в папке “Скриншоты примера взаимодействия с ботом в telegram”

Полный воркфлоу доступен для импорта, файл “ИИ-помогатор.json”, скриншоты схемы: “Схема n8n. 1часть”, “Схема n8n. 2 часть”. Ключевые блоки воркфлоу:
1. Блок приема и роутинга: Telegram Trigger → Checking the file type → маршрутизация на /start, /help, обработку документа или ошибку типа.
2. Блок обработки документа: Get a file → Upload to LlamaParse → асинхронное ожидание готовности (Is Job Ready?) → Get Parsed Resume.
3. Блок AI-анализа и сохранения: Detect Document Language → AI Agent (суммаризация) → сохранение в 2 листа Google Sheets → отправка результата.

## Выбор инструментов и обоснование
- n8n - основная платформа оркестрации, low-code подход, соответствующий заданию, мощные возможности интеграции, бесплатный для самохоста и есть облачная версия (которая и использовалась), поддержка сложных потоков с ветвлением
- LlamaParse API - извлечение текста из документов, нативное понимание сложных PDF/DOCX, сохранение структуры (заголовки, списки), высокое качество распознавания, простой REST API
- OpenRouter - AI-анализ текста, стабильность работы и доступ к множеству моделей через единый API, что позволило в рамках тестового задания использовать бесплатную модель с хорошим качеством суммаризации на русском/английском
- Google Sheets - хранение результатов, универсальность и доступность, легкая визуализация данных, возможность дальнейшего анализа, бесплатный и знакомый большинству инструмент

Рассмотрим особенности системы. Хранение данных в таблице на двух листах "Данные файла" с метаданными для аудита и возможности в дальнейшем создания статистики, "Контент" с данными суммаризации и ключевых слов для дальнейшего поиска и анализа. Цикл опроса статуса LlamaParse происходит с задержками, пользователь получает промежуточные статусы выполнения. Помимо необходимых метаданных, были реализованы дополнительно: автоматическое определение языка документа, подсчет слов и символов, расчет времени обработки от отправки документа до отправки результата, форматирование дат и размеров файлов

**Самая сложная часть реализации** оказалась синхронизация данных между асинхронными этапами обработки и объединение разрозненных результатов в единую структуру для сохранения. Асинхронность LlamaParse: API не возвращает результат мгновенно. Пришлось проектировать цикл ожидания с проверкой статуса (Is Job Ready? → Wait → Get Processing Status). Метаданные извлекаются в начале, текст обрабатывается в середине, AI-анализ выполняется в конце. Все эти данные нужно корректно соединить в узле Merge metadata with summarization. Модель возвращает неструктурированный текст, который нужно правильно разделить на суммаризацию и ключевые слова (реализовано в Splitting the response).

**Дальнейшие направления для улучшения**: добавление OCR для сканов и изображений, рассматривала несколько готовых решений, например интеграция Tesseract.js, автоматическое определение типа контента (текст/скан), отдельный лист для логов ошибок, уведомления о сбоях, категоризация документов, автоматическое определение типа (резюме, договор, статья, отчет), тегирование по тематике с помощью ИИ, векторный поиск и семантический анализ, поиск похожих документов в базе знаний, расширенная аналитика, статистика по пользователям и типам документов, поддержка большего количества языков (сейчас пока определяется только русский и английский), в целом, и многое другое.

